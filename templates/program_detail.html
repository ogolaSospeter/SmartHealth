<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ program.name }} - Program Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

</head>
<body class="bg-light">
    <style>
        .program-status {
          padding: 5px 10px;
          border-radius: 2px;
          font-size: 0.8rem;
      }
      
      .program-status.active {
          background-color: #037030;
          color: #f1f7f2;
      }
      
      .program-status.closed {
          background-color: #46020b;
          color: #fcfaf8;
      }
      </style>
    <div class="container py-5">
        <div class="container my-5">
            {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
      <div class="alert alert-{{ category }} d-flex align-items-center" role="alert">
        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
        <div>
            {{ message }}
        </div>
      </div>
       
      {% endfor %}
    {% endif %}
  {% endwith %}
            
            <div class="text-center mb-4">
                <h1 class="h3">{{ program.name }}</h1>
            </div>
            <span class="program-status {{program.status }}">{{program.status }}</span>
            <div class="card shadow-sm border-0 bg-light">
                <div class="card-body">
                    <h6 class="card-title">Description</h6>
                    <p class="card-text">{{ program.description }}</p>
                </div>
            </div>
        </div>

    <div class="row g-4 mb-5">
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100 bg-light">
                       <div class="card-body d-flex flex-column justify-content-center align-items-center text-center">
                    <i class="bi bi-people-fill text-primary fs-3 mb-2"></i>
                    <h6 class="card-title">Program Type</h6>
                    <p class="card-text" style="color: chocolate;">{{ program.program_type }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100 bg-light">
                       <div class="card-body d-flex flex-column justify-content-center align-items-center text-center">
                    <i class="bi bi-people-fill text-primary fs-3 mb-2"></i>
                    <h6 class="card-title">Target Group</h6>
                    <p class="card-text" style="color: chocolate;">{{ program.target_group }}</p>
                </div>
            </div>
        </div>
    
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100 bg-light">
                       <div class="card-body d-flex flex-column justify-content-center align-items-center text-center">
                    <i class="bi bi-person-badge-fill text-secondary fs-3 mb-2"></i>
                    <h6 class="card-title">Created By</h6>
                    <p class="card-text" style="color: chocolate;">{{ program.created_by_name or "Unknown" }}</p>
                </div>
            </div>
        </div>
    
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100 bg-light">
                       <div class="card-body d-flex flex-column justify-content-center align-items-center text-center">
                    <i class="bi bi-calendar-check text-success fs-3 mb-2"></i>
                    <h6 class="card-title">Start Date</h6>
                    <p class="card-text" style="color: chocolate;">{{ program.start_date }}</p>
                </div>
            </div>
        </div>
    
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100 bg-light">
                       <div class="card-body d-flex flex-column justify-content-center align-items-center text-center">
                    <i class="bi bi-calendar-x text-danger fs-3 mb-2"></i>
                    <h6 class="card-title">End Date</h6>
                    <p class="card-text" style="color: chocolate;">{{ program.end_date or "N/A" }}</p>
                </div>
            </div>
        </div>
    
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100 bg-light">
                       <div class="card-body d-flex flex-column justify-content-center align-items-center text-center">
                    <i class="bi bi-person-lines-fill text-info fs-3 mb-2"></i>
                    <h6 class="card-title">Estimated Clients</h6>
                    <p class="card-text" style="color: chocolate;">{{ program.estimated_clients }}</p>
                </div>
            </div>
        </div>
    
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100 bg-light">
                       <div class="card-body d-flex flex-column justify-content-center align-items-center text-center">
                    <i class="bi bi-people text-dark fs-3 mb-2"></i>
                    <h6 class="card-title">Enrolled Clients</h6>
                    <p class="card-text" style="color: chocolate;">{{ enrolled_clients }}</p>
                </div>
            </div>
        </div>
    
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100 bg-light">
                       <div class="card-body d-flex flex-column justify-content-center align-items-center text-center">
                    <i class="bi bi-arrow-left-right text-warning fs-3 mb-2"></i>
                    <h6 class="card-title">Referral Required</h6>
                    <p class="card-text" style="color: chocolate;">{{ "Yes" if program.require_referral else "No" }}</p>
                </div>
            </div>
        </div>
    
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100 bg-light">
                       <div class="card-body d-flex flex-column justify-content-center align-items-center text-center">
                    <i class="bi bi-repeat text-purple fs-3 mb-2"></i>
                    <h6 class="card-title">Follow-up Required</h6>
                    <p class="card-text" style="color: chocolate;">{{ "Yes" if program.follow_up else "No" }}</p>
                </div>
            </div>
        </div>
    
        
    </div>
    

        <hr>

        <!-- Milestones Section -->
<div class="mb-4">
    <h2 class="h5 mb-3">Milestones</h2>
    {% if milestones %}
        <div class="table-responsive">
            <table class="table table-bordered table-striped table-light shadow-sm">
                <thead class="table-primary">
                    <tr>
                        <th>#</th>
                        <th>Title</th>
                        <th>Target Date</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    {% for milestone in milestones %}
                        <tr>
                            <td>{{ loop.index}} </td>
                            <td>{{ milestone.title }}</td>
                            <td>{{ milestone.target_date }}</td>
                            <td>{{ milestone.description or '-' }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="text-muted">No milestones added.</p>
    {% endif %}
</div>

<!-- Resources Section -->
<div class="mb-4">
    <h2 class="h5 mb-3">Resources</h2>
    {% if resources %}
        <div class="table-responsive">
            <table class="table table-bordered table-striped table-light shadow-sm">
                <thead class="table-primary">
                    <tr>
                        <th>#</th>
                        <th>Resource Type</th>
                        <th>Quantity</th>
                    </tr>
                </thead>
                <tbody>
                    {% for res in resources %}
                        <tr>
                            <td>{{ loop.index}} </td>
                            <td>{{ res.resource_type }}</td>
                            <td>{{ res.quantity }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="text-muted">No resources listed.</p>
    {% endif %}
</div>


<div class="d-flex justify-content-center gap-2">
    <a href="{{ url_for('edit_program', program_id=program.id) }}" class="btn btn-primary">Edit Program</a>
    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary">‚Üê Back to Programs</a>

    <!-- Close Button -->
    <form action="{{ url_for('close_program', program_id=program.id) }}" method="POST" onsubmit="return confirm('Update the Program Status?')">
        <button type="submit" class="btn btn-danger">Update Status</button>
    </form>
    <!-- Delete Button -->
    <form action="{{ url_for('delete_program', program_id=program.id) }}" method="POST" onsubmit="return confirm('Confirm Delete?')">
        <button type="submit" class="btn btn-danger">Delete Program</button>
    </form>
</div>

    </div>
    <script src="/static/scripts/alerts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
